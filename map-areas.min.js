/*!
 * MapArea
 * https://github.com/caboodle-tech/map-area
 *
 * Version: 1.0.3
 *
 * Copyright Christopher Keers (Caboodle Tech Inc)
 * https://github.com/blizzardengle (https://github.com/caboodle-tech)
 *
 * Released under the MIT license.
 * Date: 2020-03-31
 */
var MapArea=function(){"use strict";var t,e,r=[],n=function(){var n=new Date;if(null!=t&&n.getTime()>t+50){clearInterval(e),e="",t="";var s,i=[];for(s=0;s<r.length;s++)r[s][0].parentNode.removeChild(r[s][0]),r[s][0]=null,i.push([r[s][1],r[s][2],r[s][3]]);for(r=[],s=0;s<i.length;s++)a(i[s][0],i[s][1],i[s][2])}t=n.getTime()},s=function(t){t.click()},a=function(t,e,n){var a,l,c,o,u,p,d,h,g,w=e.parentElement,m=t.querySelectorAll("area"),v=m.length,b="0 0 "+e.naturalWidth+" "+e.naturalHeight,f="width: "+e.naturalWidth+"px; height: "+e.naturalHeight+"px;",A="";n.className&&(A=n.className);var y,E,I=e.offsetWidth/(e.naturalWidth||e.width),x=document.createElementNS("http://www.w3.org/2000/svg","svg");for(x.setAttribute("viewBox",b),x.setAttribute("xmlns","http://www.w3.org/2000/svg"),x.setAttribute("style","position: absolute; z-index: 9000; overflow: visible; "+f),r.push([x,t,e,n]),y=0;y<v;y++){for(m[y].dataset.coords?a=m[y].dataset.coords:(a=m[y].coords,m[y].dataset.coords=a),a=(a=a.replace(/ /g,"")).split(","),E=0;E<a.length;E++)a[E]=Math.ceil(a[E]*I);switch(m[y].coords=a.join(","),m[y].shape){case"rect":case"rectangle":p=parseInt(a[0]),(d=parseInt(a[2])-parseInt(a[0]))<0&&(p-=d*=-1),u=parseInt(a[1]),(h=parseInt(a[3])-parseInt(a[1]))<0&&(u-=h*=-1),(g=document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("x",p),g.setAttribute("y",u),g.setAttribute("width",d),g.setAttribute("height",h),g.setAttribute("class",A+" rectangle"),o=!0;break;case"circ":case"circle":(g=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx",a[0]),g.setAttribute("cy",a[1]),g.setAttribute("r",a[2]),g.setAttribute("class",A+" circle"),o=!0;break;case"poly":case"polygon":for(l="",c=a.length,E=0;E<c;E+=2)l+=a[E]+","+a[E+1]+" ";l=l.trim(),(g=document.createElementNS("http://www.w3.org/2000/svg","polygon")).setAttribute("points",l),g.setAttribute("class",A+" polygon"),o=!0}o&&(g.addEventListener("click",s.bind(null,m[y])),g.setAttribute("style","cursor: pointer;"),g.innerHTML="<title>"+m[y].title+"</title>",x.appendChild(g))}w.insertBefore(x,w.firstElementChild),window.addEventListener("resize",i)},i=function(){null!=e&&""!=e||(e=setInterval(n,50))};return{init:function(t){var e,r;return!!(t.name&&(e=document.querySelector('map[name="'+t.name+'"]'))&&(r=document.querySelector('img[usemap="#'+t.name+'"]')))&&(r.parentElement.style.position="relative",a(e,r,t),!0)}}};
